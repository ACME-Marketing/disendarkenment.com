---
export const prerender = true;
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Get Started - Disendarkenment" description="Begin your psychedelic journey with professional facilitation. Learn about our process, eligibility requirements, and how to schedule your consultation.">
	<!-- Hero Section -->
	<section class="bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 text-white py-16">
		<div class="container mx-auto px-4">
			<div class="max-w-4xl mx-auto text-center">
				<h1 class="text-4xl md:text-5xl font-bold mb-6">Begin Your Journey</h1>
				<p class="text-xl text-purple-100 mb-8">
					Take the first step toward transformation with professional psychedelic journey facilitation
				</p>
				<a href="#consultation" class="bg-white text-purple-900 hover:bg-purple-50 font-semibold py-4 px-8 rounded-lg text-lg transition duration-300 inline-block">
					Schedule Free Consultation
				</a>
			</div>
		</div>
	</section>

	<!-- Process Overview -->
	<section class="py-16 bg-white">
		<div class="container mx-auto px-4">
			<div class="max-w-6xl mx-auto">
				<h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">Your Journey Process</h2>
				
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
					<div class="text-center">
						<div class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
							<span class="text-2xl font-bold text-purple-600">1</span>
						</div>
						<h3 class="text-xl font-semibold text-gray-900 mb-4">Initial Consultation</h3>
						<p class="text-gray-600">
							Free 30-minute consultation to discuss your goals, assess eligibility, and answer questions about the process.
						</p>
						<div class="mt-4">
							<a href="#consultation" class="text-purple-600 hover:text-purple-800 font-medium">Schedule Now →</a>
						</div>
					</div>

					<div class="text-center">
						<div class="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6">
							<span class="text-2xl font-bold text-indigo-600">2</span>
						</div>
						<h3 class="text-xl font-semibold text-gray-900 mb-4">Comprehensive Assessment</h3>
						<p class="text-gray-600">
							Detailed medical and psychological evaluation to ensure safety and determine the best approach for your journey.
						</p>
						<div class="mt-4">
							<a href="/services/preparation" class="text-indigo-600 hover:text-indigo-800 font-medium">Learn More →</a>
						</div>
					</div>

					<div class="text-center">
						<div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
							<span class="text-2xl font-bold text-blue-600">3</span>
						</div>
						<h3 class="text-xl font-semibold text-gray-900 mb-4">Preparation Phase</h3>
						<p class="text-gray-600">
							Thorough preparation including education, intention setting, and building trust with your facilitator.
						</p>
						<div class="mt-4">
							<a href="/services/preparation" class="text-blue-600 hover:text-blue-800 font-medium">View Details →</a>
						</div>
					</div>

					<div class="text-center">
						<div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
							<span class="text-2xl font-bold text-green-600">4</span>
						</div>
						<h3 class="text-xl font-semibold text-gray-900 mb-4">Guided Journey</h3>
						<p class="text-gray-600">
							Professional facilitation in a safe, controlled environment with continuous support and monitoring.
						</p>
						<div class="mt-4">
							<a href="/services/facilitation" class="text-green-600 hover:text-green-800 font-medium">Explore Process →</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Eligibility Requirements -->
	<section class="py-16 bg-gray-50">
		<div class="container mx-auto px-4">
			<div class="max-w-6xl mx-auto">
				<h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">Eligibility Requirements</h2>
				
				<div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
					<div class="bg-white p-8 rounded-lg shadow-lg">
						<div class="flex items-center mb-6">
							<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mr-4">
								<svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6.938-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
								</svg>
							</div>
							<h3 class="text-2xl font-bold text-gray-900">Basic Requirements</h3>
						</div>
						
						<ul class="space-y-4">
							<li class="flex items-start">
								<svg class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Age Requirement:</span>
									<span class="text-gray-700"> Must be 21 years or older</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Legal Status:</span>
									<span class="text-gray-700"> Oregon or Colorado resident with valid ID</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Medical Clearance:</span>
									<span class="text-gray-700"> Pass comprehensive health screening</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Psychological Assessment:</span>
									<span class="text-gray-700"> Mental health evaluation and readiness assessment</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-green-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Commitment:</span>
									<span class="text-gray-700"> Willingness to complete full preparation and integration process</span>
								</div>
							</li>
						</ul>
					</div>

					<div class="bg-white p-8 rounded-lg shadow-lg">
						<div class="flex items-center mb-6">
							<div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mr-4">
								<svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
								</svg>
							</div>
							<h3 class="text-2xl font-bold text-gray-900">Medical Contraindications</h3>
						</div>
						
						<ul class="space-y-4">
							<li class="flex items-start">
								<svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Psychotic Disorders:</span>
									<span class="text-gray-700"> Schizophrenia, bipolar disorder with psychotic features</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Severe Heart Conditions:</span>
									<span class="text-gray-700"> Uncontrolled hypertension, recent cardiac events</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Medication Interactions:</span>
									<span class="text-gray-700"> MAOIs, certain antidepressants, lithium</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Pregnancy/Nursing:</span>
									<span class="text-gray-700"> Not recommended during pregnancy or breastfeeding</span>
								</div>
							</li>
							<li class="flex items-start">
								<svg class="w-5 h-5 text-red-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
								</svg>
								<div>
									<span class="font-semibold text-gray-900">Substance Use:</span>
									<span class="text-gray-700"> Active substance use disorders requiring treatment</span>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Consultation Booking -->
	<section id="consultation" class="py-16 bg-white">
		<div class="container mx-auto px-4">
			<div class="max-w-4xl mx-auto">
				<h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">Schedule Your Free Consultation</h2>
				
				<div class="bg-purple-50 p-8 rounded-lg">
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
						<div>
							<h3 class="text-2xl font-semibold text-gray-900 mb-6">What to Expect</h3>
							<ul class="space-y-4">
								<li class="flex items-start">
									<svg class="w-5 h-5 text-purple-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
									</svg>
									<span class="text-gray-700">30-minute confidential conversation</span>
								</li>
								<li class="flex items-start">
									<svg class="w-5 h-5 text-purple-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
									</svg>
									<span class="text-gray-700">Discussion of your goals and intentions</span>
								</li>
								<li class="flex items-start">
									<svg class="w-5 h-5 text-purple-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
									</svg>
									<span class="text-gray-700">Overview of our process and approach</span>
								</li>
								<li class="flex items-start">
									<svg class="w-5 h-5 text-purple-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
									</svg>
									<span class="text-gray-700">Initial eligibility assessment</span>
								</li>
								<li class="flex items-start">
									<svg class="w-5 h-5 text-purple-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
									</svg>
									<span class="text-gray-700">Answers to all your questions</span>
								</li>
								<li class="flex items-start">
									<svg class="w-5 h-5 text-purple-500 mr-3 mt-1 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
										<path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
									</svg>
									<span class="text-gray-700">Next steps if you decide to proceed</span>
								</li>
							</ul>
						</div>

						<div class="bg-white p-6 rounded-lg shadow-lg">
							<h3 class="text-xl font-semibold text-gray-900 mb-6">Book Your Consultation</h3>
							<form id="consultation-form" class="space-y-4" onsubmit="handleConsultationBooking(event)">
								<div>
									<label for="name" class="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
									<input
										type="text"
										id="name"
										name="name"
										required
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
										placeholder="Enter your full name"
									>
									<div id="name-error" class="text-red-500 text-sm mt-1 hidden"></div>
								</div>
								<div>
									<label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
									<input
										type="email"
										id="email"
										name="email"
										required
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
										placeholder="your@email.com"
									>
									<div id="email-error" class="text-red-500 text-sm mt-1 hidden"></div>
								</div>
								<div>
									<label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
									<input
										type="tel"
										id="phone"
										name="phone"
										required
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
										placeholder="(555) 123-4567"
									>
									<div id="phone-error" class="text-red-500 text-sm mt-1 hidden"></div>
								</div>
								<div>
									<label for="location" class="block text-sm font-medium text-gray-700 mb-2">Location *</label>
									<select
										id="location"
										name="location"
										required
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
									>
										<option value="">Select your state</option>
										<option value="oregon">Oregon</option>
										<option value="colorado">Colorado</option>
										<option value="other">Other</option>
									</select>
									<div id="location-error" class="text-red-500 text-sm mt-1 hidden"></div>
								</div>
								<div>
									<label for="age" class="block text-sm font-medium text-gray-700 mb-2">Age *</label>
									<select
										id="age"
										name="age"
										required
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
									>
										<option value="">Select age range</option>
										<option value="18-20">18-20 (Not eligible - must be 21+)</option>
										<option value="21-30">21-30</option>
										<option value="31-40">31-40</option>
										<option value="41-50">41-50</option>
										<option value="51-60">51-60</option>
										<option value="61+">61+</option>
									</select>
									<div id="age-error" class="text-red-500 text-sm mt-1 hidden"></div>
								</div>
								<div>
									<label for="experience" class="block text-sm font-medium text-gray-700 mb-2">Previous Psychedelic Experience</label>
									<select
										id="experience"
										name="experience"
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
									>
										<option value="">Select experience level</option>
										<option value="none">No previous experience</option>
										<option value="minimal">Minimal (1-2 times)</option>
										<option value="moderate">Moderate (several times)</option>
										<option value="extensive">Extensive experience</option>
									</select>
								</div>
								<div>
									<label for="preferred-time" class="block text-sm font-medium text-gray-700 mb-2">Preferred Consultation Time</label>
									<select
										id="preferred-time"
										name="preferred-time"
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
									>
										<option value="">Select preferred time</option>
										<option value="morning">Morning (9 AM - 12 PM)</option>
										<option value="afternoon">Afternoon (12 PM - 5 PM)</option>
										<option value="evening">Evening (5 PM - 8 PM)</option>
										<option value="flexible">I'm flexible</option>
									</select>
								</div>
								<div>
									<label for="message" class="block text-sm font-medium text-gray-700 mb-2">Brief Message (Optional)</label>
									<textarea
										id="message"
										name="message"
										rows="3"
										class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
										placeholder="Tell us briefly about your interest in psychedelic therapy, any specific goals, or questions you have..."
									></textarea>
								</div>
								<div class="flex items-start">
									<input
										type="checkbox"
										id="consent"
										name="consent"
										required
										class="mt-1 mr-3"
									>
									<label for="consent" class="text-sm text-gray-600">
										I understand this is a preliminary consultation and does not guarantee eligibility for services. I consent to being contacted about psychedelic therapy services. *
									</label>
								</div>
								<div id="consent-error" class="text-red-500 text-sm hidden"></div>
								<input type="hidden" name="webhook_url" value="https://n8n.srv874889.hstgr.cloud/webhook-test/b1fc5008-d10f-42f0-92aa-91d8a3806319">
								<button
									type="submit"
									id="submit-btn"
									class="w-full bg-purple-600 hover:bg-purple-500 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center"
								>
									<span id="submit-text">Schedule Free Consultation</span>
									<svg id="loading-spinner" class="animate-spin -mr-1 ml-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
										<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
										<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
									</svg>
								</button>
							</form>
							<p class="text-sm text-gray-600 mt-4 text-center">
								We'll contact you within 24 hours to schedule your consultation.
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- FAQ Section -->
	<section class="py-16 bg-gray-50">
		<div class="container mx-auto px-4">
			<div class="max-w-4xl mx-auto">
				<h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">Frequently Asked Questions</h2>
				
				<div class="space-y-6">
					<div class="bg-white p-6 rounded-lg shadow-lg">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">How long does the entire process take?</h3>
						<p class="text-gray-600">
							The complete journey typically takes 2-3 months from initial consultation to completion of integration. This includes preparation (2-4 weeks), the facilitated session (1 day), and integration support (6-8 weeks).
						</p>
					</div>

					<div class="bg-white p-6 rounded-lg shadow-lg">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">What does the cost include?</h3>
						<p class="text-gray-600">
							Our packages include all preparation sessions, the facilitated journey experience, immediate integration support, follow-up sessions, and ongoing support resources. Pricing varies by package and individual needs.
						</p>
					</div>

					<div class="bg-white p-6 rounded-lg shadow-lg">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">Is this legal?</h3>
						<p class="text-gray-600">
							Yes, we operate under full legal compliance with Oregon's Psilocybin Services Act (Measure 109) and Colorado's Natural Medicine Health Act (Proposition 122). All services are provided in licensed facilities by certified facilitators.
						</p>
					</div>

					<div class="bg-white p-6 rounded-lg shadow-lg">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">What if I'm not eligible?</h3>
						<p class="text-gray-600">
							If you're not currently eligible, we'll provide guidance on steps you can take to potentially become eligible in the future. Many get great results from the Disendarkenment Process without the psychedelic experience, and we can help you explore those options.
						</p>
					</div>

					<div class="bg-white p-6 rounded-lg shadow-lg">
						<h3 class="text-lg font-semibold text-gray-900 mb-3">How do you ensure safety?</h3>
						<p class="text-gray-600">
							Safety is our top priority. We conduct thorough medical and psychological screenings, provide continuous professional supervision, maintain emergency protocols, and operate in secure, controlled environments.
						</p>
					</div>
				</div>
			</div>
		</div>
	</section>
</BaseLayout>

<script>
	async function handleConsultationBooking(event: Event) {
		event.preventDefault();
		
		const form = event.target as HTMLFormElement;
		const formData = new FormData(form);
		
		// Clear previous errors
		clearErrors();
		
		// Validate form
		if (!validateForm(formData)) {
			return;
		}
		
		// Show loading state
		showLoadingState();
		
		try {
			// Submit to n8n webhook directly
			const webhookUrl = formData.get('webhook_url') as string;
			formData.delete('webhook_url'); // Remove webhook_url from data sent to n8n
			const response = await fetch(webhookUrl, {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify(Object.fromEntries(formData.entries()))
			});
			
			const result = await response.json();
			
			if (response.ok && result.success) {
				// Hide loading state
				hideLoadingState();
				
				// Show success message
				showSuccessMessage();
				
				// Reset form
				form.reset();
			} else {
				throw new Error(result.error || 'Failed to submit form');
			}
		} catch (error) {
			console.error('Form submission error:', error);
			
			// Hide loading state
			hideLoadingState();
			
			// Show error message
			showErrorMessage('There was an error submitting your request. Please try again or contact us directly.');
		}
	}
	
	function validateForm(formData: FormData): boolean {
		let isValid = true;
		
		// Validate name
		const name = formData.get('name') as string;
		if (!name || name.trim().length < 2) {
			showError('name-error', 'Please enter your full name (at least 2 characters)');
			isValid = false;
		}
		
		// Validate email
		const email = formData.get('email') as string;
		const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
		if (!email || !emailRegex.test(email)) {
			showError('email-error', 'Please enter a valid email address');
			isValid = false;
		}
		
		// Validate phone (if provided)
		const phone = formData.get('phone') as string;
		if (phone) {
			const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
			const cleanPhone = phone.replace(/[\s\-\(\)]/g, '');
			if (!phoneRegex.test(cleanPhone) || cleanPhone.length < 10) {
				showError('phone-error', 'Please enter a valid phone number');
				isValid = false;
			}
		}
		
		// Validate location
		const location = formData.get('location') as string;
		if (!location) {
			showError('location-error', 'Please select your state');
			isValid = false;
		}
		
		// Validate age
		const age = formData.get('age') as string;
		if (!age) {
			showError('age-error', 'Please select your age range');
			isValid = false;
		} else if (age === '18-20') {
			showError('age-error', 'You must be 21 or older to be eligible for our services');
			isValid = false;
		}
		
		// Validate consent
		const consent = formData.get('consent');
		if (!consent) {
			showError('consent-error', 'Please acknowledge the consent statement');
			isValid = false;
		}
		
		return isValid;
	}
	
	function showError(elementId: string, message: string) {
		const errorElement = document.getElementById(elementId);
		if (errorElement) {
			errorElement.textContent = message;
			errorElement.classList.remove('hidden');
		}
		
		// Also highlight the input field
		const inputId = elementId.replace('-error', '');
		const inputElement = document.getElementById(inputId);
		if (inputElement) {
			inputElement.classList.add('border-red-500');
			inputElement.classList.remove('border-gray-300');
		}
	}
	
	function clearErrors() {
		const errorElements = document.querySelectorAll('[id$="-error"]');
		errorElements.forEach(element => {
			element.classList.add('hidden');
			element.textContent = '';
		});
		
		// Remove error styling from inputs
		const inputs = document.querySelectorAll('input, select, textarea');
		inputs.forEach(input => {
			input.classList.remove('border-red-500');
			input.classList.add('border-gray-300');
		});
	}
	
	function showLoadingState() {
		const submitBtn = document.getElementById('submit-btn');
		const submitText = document.getElementById('submit-text');
		const loadingSpinner = document.getElementById('loading-spinner');
		
		if (submitBtn && submitText && loadingSpinner) {
			submitBtn.setAttribute('disabled', 'true');
			submitBtn.classList.add('opacity-75', 'cursor-not-allowed');
			submitText.textContent = 'Submitting...';
			loadingSpinner.classList.remove('hidden');
		}
	}
	
	function hideLoadingState() {
		const submitBtn = document.getElementById('submit-btn');
		const submitText = document.getElementById('submit-text');
		const loadingSpinner = document.getElementById('loading-spinner');
		
		if (submitBtn && submitText && loadingSpinner) {
			submitBtn.removeAttribute('disabled');
			submitBtn.classList.remove('opacity-75', 'cursor-not-allowed');
			submitText.textContent = 'Schedule Free Consultation';
			loadingSpinner.classList.add('hidden');
		}
	}
	
	function showSuccessMessage() {
		// Create success modal
		const modal = document.createElement('div');
		modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
		modal.innerHTML = `
			<div class="bg-white rounded-lg p-8 max-w-md mx-4 text-center">
				<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
					<svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
					</svg>
				</div>
				<h3 class="text-2xl font-bold text-gray-900 mb-4">Consultation Request Submitted!</h3>
				<p class="text-gray-600 mb-6">
					Thank you for your interest in our services. We'll review your information and contact you within 24 hours to schedule your free consultation.
				</p>
				<div class="space-y-3">
					<p class="text-sm text-gray-500">
						<strong>Next steps:</strong>
					</p>
					<ul class="text-sm text-gray-600 text-left space-y-1">
						<li>• Check your email for a confirmation message</li>
						<li>• We'll call or email to schedule your consultation</li>
						<li>• Consider taking our <a href="/readiness-assessment" class="text-purple-600 hover:text-purple-800">readiness assessment</a></li>
					</ul>
				</div>
				<button
					onclick="closeSuccessModal()"
					class="mt-6 bg-purple-600 hover:bg-purple-500 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"
				>
					Close
				</button>
			</div>
		`;
		
		document.body.appendChild(modal);
		
		// Auto-close after 10 seconds
		setTimeout(() => {
			closeSuccessModal();
		}, 10000);
	}
	
	function closeSuccessModal() {
		const modal = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-50');
		if (modal) {
			modal.remove();
		}
	}
	
	function showErrorMessage(message: string) {
		// Create error modal
		const modal = document.createElement('div');
		modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
		modal.innerHTML = `
			<div class="bg-white rounded-lg p-8 max-w-md mx-4 text-center">
				<div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
					<svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
					</svg>
				</div>
				<h3 class="text-2xl font-bold text-red-900 mb-4">Submission Error</h3>
				<p class="text-red-700 mb-6">
					${message}
				</p>
				<div class="space-y-3">
					<p class="text-sm text-red-600">
						<strong>You can also contact us directly:</strong>
					</p>
					<p class="text-sm text-gray-600">
						Email: wayne@disendarkenment.com<br>
						Phone: (904) 561-0301
					</p>
				</div>
				<button
					onclick="closeErrorModal()"
					class="mt-6 bg-red-600 hover:bg-red-500 text-white font-semibold py-2 px-6 rounded-lg transition duration-300"
				>
					Close
				</button>
			</div>
		`;
		
		document.body.appendChild(modal);
	}
	
	function closeErrorModal() {
		const modal = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-50');
		if (modal) {
			modal.remove();
		}
	}
	
	// Add real-time validation
	document.addEventListener('DOMContentLoaded', function() {
		const form = document.getElementById('consultation-form');
		if (!form) return;
		
		// Add input event listeners for real-time validation
		const inputs = form.querySelectorAll('input, select, textarea');
		inputs.forEach(input => {
			input.addEventListener('blur', function() {
				validateSingleField(this);
			});
			
			input.addEventListener('input', function() {
				// Clear error when user starts typing
				const errorId = this.id + '-error';
				const errorElement = document.getElementById(errorId);
				if (errorElement && !errorElement.classList.contains('hidden')) {
					errorElement.classList.add('hidden');
					this.classList.remove('border-red-500');
					this.classList.add('border-gray-300');
				}
			});
		});
		
		// Age selection warning
		const ageSelect = document.getElementById('age') as HTMLSelectElement;
		if (ageSelect) {
			ageSelect.addEventListener('change', function() {
				if (this.value === '18-20') {
					showError('age-error', 'You must be 21 or older to be eligible for our services');
				}
			});
		}
	});
	
	function validateSingleField(field: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement) {
		const fieldName = field.name;
		const value = field.value.trim();
		const errorId = field.id + '-error';
		
		// Clear previous error
		const errorElement = document.getElementById(errorId);
		if (errorElement) {
			errorElement.classList.add('hidden');
		}
		field.classList.remove('border-red-500');
		field.classList.add('border-gray-300');
		
		// Validate based on field type
		switch (fieldName) {
			case 'name':
				if (value.length < 2) {
					showError(errorId, 'Name must be at least 2 characters');
				}
				break;
			case 'email':
				const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
				if (value && !emailRegex.test(value)) {
					showError(errorId, 'Please enter a valid email address');
				}
				break;
			case 'phone':
				if (value) {
					const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
					const cleanPhone = value.replace(/[\s\-\(\)]/g, '');
					if (!phoneRegex.test(cleanPhone) || cleanPhone.length < 10) {
						showError(errorId, 'Please enter a valid phone number');
					}
				}
				break;
		}
	}
	
	// Make functions available globally
	(window as any).handleConsultationBooking = handleConsultationBooking;
	(window as any).closeSuccessModal = closeSuccessModal;
	(window as any).closeErrorModal = closeErrorModal;
</script>